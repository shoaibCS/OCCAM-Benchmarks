DNSPROXY(1)               BSD General Commands Manual              DNSPROXY(1)

NNAAMMEE
     ddnnsspprrooxxyy -- DNS proxy

SSYYNNOOPPSSIISS
     ddnnsspprrooxxyy [--ddhhVV] [--cc _f_i_l_e]

DDEESSCCRRIIPPTTIIOONN
     The ddnnsspprrooxxyy daemon waits for nameserver queries on a user specified
     address, dispatches these queries to authoritative and recursive name-
     servers and forwards the received answers back to the original client.

     The options are as follows:

     --cc _f_i_l_e  Read configuration from file.

     --dd       Detach from current terminal and run as background process.

     --hh       Show usage.

     --VV       Show version.

     If a client from an internal IP address does a recursive lookup the query
     is forwarded to a recursive DNS server.  Authoritative queries and
     queries coming from clients in foreign networks are forwarded to an
     authoritative DNS server.

CCOONNFFIIGGUURRAATTIIOONN FFIILLEE
     At startup ddnnsspprrooxxyy reads a configuration file specified via the -c
     option or at the default location of /etc/dnsproxy.conf.

     The following keywords are recognized:

     authoritative _I_P
     Address of the authoritative nameserver [required].

     recursive _I_P
     Address of the recursive nameserver [required].

     listen _I_P
     Local address (defaults to 0.0.0.0).

     port _n_u_m_b_e_r
     Local port number (defaults to 53).

     chroot _p_a_t_h
     A path to chroot to before starting to answer queries.

     user _n_a_m_e
     A user to change to before starting to answer queries.

     authoritative-timeout _s_e_c_o_n_d_s
     Time in seconds when authoritative queries time out (defaults to 10).

     recursive-timeout _s_e_c_o_n_d_s
     Time in seconds when recursive queries time out (defaults to 90).

     authoritative-port _n_u_m_b_e_r
     Port number on authoritative nameserver (defaults to 53).

     recursive-port _n_u_m_b_e_r
     Port number on recursive nameserver (defaults to 53).

     statistics _s_e_c_o_n_d_s
     Period between output of statistics (defaults to 3600).  Use 0 to disable
     output of statistics completely.

     internal _n_e_t_w_o_r_k
     Declare networks recognized as internal and thus eligible to do recursive
     queries. One network in CIDR notation per keyword.

   EEXXAAMMPPLLEE
           authoritative 10.1.1.1
           recursive 127.0.0.1
           recursive-port 10053
           listen 192.168.1.1
           port 53
           chroot /var/empty
           user nobody
           internal 192.168.1.0/24
           internal 127.0.0.1

SSTTAATTIISSTTIICCSS
     Every hour (by default) ddnnsspprrooxxyy logs the collected statistics about its
     usage to standard error (or syslog when running detached). Statistics
     look like

           ActiveQr AuthorQr RecursQr AllQuery Answered
           0        0        0        0        0
           TimeoutQ DroppedQ DroppedA LateAnsw HashColl
           0        0        0        0        0

     and have the following meaning:

     ActiveQr
     Number of currently active queries proxied to the servers.

     AuthorQr
     Accumulated number of authoritative queries.

     RecursQr
     Accumulated number of recursive queries.

     AllQuery
     Accumulated number of all queries ever received.

     Answered
     Accumulated number of answered queries.

     TimeoutQ
     Accumulated number of queries that did not receive an answer in time.

     DroppedQ
     Accumulated number of dropped queries (e.g. transmission errors).

     DroppedA
     Accumulated number of dropped answers.

     LateAnsw
     Accumulated number of answers received after the timeout period.

     HashColl
     Accumulated number of hash collisions in the query list.

SSEEEE AALLSSOO
     named(1)

VVEERRSSIIOONN
     This manual page describes ddnnsspprrooxxyy version 1.17.

AAUUTTHHOORRSS
     Armin Wolfermann <armin@wolfermann.org>

     The ddnnsspprrooxxyy homepage is at http://www.wolfermann.org/dnsproxy.html.

LOCAL                          November 29, 2003                         LOCAL
